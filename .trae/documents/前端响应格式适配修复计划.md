根据 `backend-resp.md` 的分析，后端 API 响应格式已统一为 `ApiResponse<T>`，导致前端部分手动处理响应的代码失效。

我将按照以下步骤修复前端代码：

## Phase 1: 基础设施更新
1.  **同步 API 类型**: 在 `frontend` 目录运行 `pnpm gen-api`，确保 `src/lib/api-types.d.ts` 与后端最新 OpenAPI 规范同步。
2.  **创建通用工具库**: 新建 `frontend/src/lib/api-helpers.ts`，封装 `extractApiData` 和 `extractPaginatedData` 函数，统一处理 `ApiResponse` 解包逻辑，替代散落在各处的 `(data as any).data` 硬编码。

## Phase 2: 核心业务模块修复
将针对以下文件进行重构，移除过时的手动数据解包逻辑，改用新的工具函数：

1.  **项目核心 (`projects/actions/core.ts`)**
    - 修复 5 个端点（列表、详情、统计等），移除重复的 `.data` 访问。
2.  **装修模块 (`projects/actions/renovation.ts`)**
    - 修复 4 个端点，修正照片列表和状态更新的响应处理。
3.  **销售模块 (`projects/actions/sales.ts`)**
    - 修复 3 个端点，确保销售记录和成交操作能正确获取返回数据。
4.  **现金流模块 (`projects/[projectId]/cashflow/actions.ts`)**
    - 移除为了兼容旧格式而写的复杂判断逻辑，简化为直接使用新格式。

## Phase 3: 其他模块修复
1.  **小区治理 (`properties/governance/actions.ts`)**
    - 修复 `message` 和 `affected_properties` 字段的提取方式。

## Phase 4: 验证
1.  运行 `pnpm lint` 检查是否有类型错误。
2.  (可选) 如果环境允许，尝试构建项目以确保类型定义无误。
